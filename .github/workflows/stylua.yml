name: Stylua check

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "master" branch
  push:
    branches: [ "rework-healmodes-and-max-HPS" ]
  pull_request:
    branches: [ "rework-healmodes-and-max-HPS" ]

jobs:
  integration:
    runs-on: ubuntu-latest
    permissions:
      # Give the default GITHUB_TOKEN write permission to commit and push the changed files back to the repository.
      contents: write
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: stylua
      uses: JohnnyMorganz/stylua-action@v3
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        version: latest # NOTE: we recommend pinning to a specific version in case of formatting changes
        args: -g '*.lua' -- .
    - name: Apply Actions
      uses: actions/checkout@v4
      with:
        ref: ${{ github.head_ref }}
    - name: Apply Actions 2
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: stylua formatting
 #   - name: Setup luarocks
 #     uses: leafo/gh-actions-luarocks@v4

 #   - name: Setup tools
 #     shell: bash
 #     run: |
 #       sudo apt install -y curl unzip --no-install-recommends
 #       bash ./utils/install_stylua.sh
 #       luarocks install luacheck
 #       luarocks install vusted
 #   - name: Run tests
 #     shell: bash
 #     run: make integration
 
 #   - name: Run tests
 #     shell: bash
 #     run: stylua



